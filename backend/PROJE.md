YAPAYZEKA CHATBOT SÄ°STEMÄ° - www.yapayzekachatbot.com
ğŸ“Œ PROJE AMACI VE KULLANIM ALANI
Ana AmaÃ§
Ä°ÅŸletmelerin web sitelerinden otomatik olarak bilgi toplayarak, yapay zeka destekli chatbot oluÅŸturan ve mÃ¼ÅŸteri etkileÅŸimlerini yÃ¶neten SaaS (Software as a Service) platformu. En Ã¶nemli Ã¶zelliÄŸi otomatik kurulumu kÄ±sa sÃ¼rede hazÄ±r hale gelmesi

Hedef KullanÄ±cÄ±lar
KÃ¼Ã§Ã¼k ve orta Ã¶lÃ§ekli iÅŸletmeler (KOBÄ°)
Hizmet sektÃ¶rÃ¼ (kuafÃ¶rler, klinikler, oteller, restoranlar vb. gibi hizmet veren tÃ¼m sektÃ¶rler)
E-ticaret siteleri
DanÄ±ÅŸmanlÄ±k firmalarÄ±
Temel KullanÄ±m SenaryolarÄ±
Otomatik Kurulum: Ä°ÅŸletme web sitesi URL'i girilir â†’ Sistem otomatik bilgi toplar â†’ Chatbot hazÄ±r
MÃ¼ÅŸteri Ä°letiÅŸimi: Web sitesine gÃ¶mÃ¼len widget ile 7/24 mÃ¼ÅŸteri desteÄŸi
Randevu YÃ¶netimi: AI ile otomatik randevu alma, Ã§akÄ±ÅŸma kontrolÃ¼
Bilgi TabanÄ±: SSS, hizmetler, Ã¼rÃ¼nler otomatik organize edilir
ğŸ—ï¸ SÄ°STEM MÄ°MARÄ°SÄ°
Genel YapÄ± (3 KatmanlÄ±)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FRONTEND                          â”‚
â”‚         (Next.js 15 + React 19)                     â”‚
â”‚   Dashboard + Landing Page + Auth Pages            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†• REST API / WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   BACKEND                           â”‚
â”‚         (Node.js + Express + TypeScript)            â”‚
â”‚   API + AI Engine + WebSocket Server                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†• SQL / Cache
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              DATABASE + CACHE                       â”‚
â”‚      Supabase (PostgreSQL) + Redis                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†• Embed Script
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   WIDGET                            â”‚
â”‚         (React + Vite + Socket.io)                  â”‚
â”‚   MÃ¼ÅŸteri web sitelerine gÃ¶mÃ¼len chat widget   
(SektÃ¶r StandartlarÄ±nda Chat Hizmeti Whatsapp wb Sohbet penceresi)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ¨ FRONTEND (Dashboard + Web Sitesi)
Teknoloji Stack
Framework: Next.js 15 (App Router)
UI Library: React 19
Styling: Tailwind CSS 4
Component Library: Radix UI + shadcn/ui
State Management: React Hooks + SWR
Form Management: React Hook Form + Zod
Real-time: Socket.io Client
Charts: Recharts
Animations: Framer Motion
Ana BÃ¶lÃ¼mler
1. Landing Page (Pazarlama)
ÃœrÃ¼n tanÄ±tÄ±mÄ±
Ã–zellikler ve fiyatlandÄ±rma
Demo ve kayÄ±t formlarÄ±
2. Authentication (Kimlik DoÄŸrulama)
KayÄ±t olma (Google - Email GiriÅŸ)
GiriÅŸ yapma
Åifre sÄ±fÄ±rlama
Multi-tenant desteÄŸi
3. Dashboard (YÃ¶netim Paneli)
Ana ModÃ¼ller:

a) AI Otomatik Kurulum

URL giriÅŸi
Web scraping (Puppeteer/Firecrawl)
AI ile veri Ã§Ä±karma (2 fazlÄ± sistem)
Ã–nizleme ve onaylama
Otomatik kayÄ±t
b) Bot YapÄ±landÄ±rmasÄ±

Sistem talimatlarÄ±
Bilgi tabanÄ± yÃ¶netimi
Fonksiyon yÃ¶netimi
Prompt ÅŸablonlarÄ±
c) Hizmet YÃ¶netimi

Hizmet ekleme/dÃ¼zenleme
Kategori yÃ¶netimi
FiyatlandÄ±rma
GÃ¶rseller ve detaylar
AI destekli import
d) Randevu Sistemi

Randevu oluÅŸturma
Takvim gÃ¶rÃ¼nÃ¼mÃ¼
Ã‡akÄ±ÅŸma kontrolÃ¼
Durum yÃ¶netimi
Real-time gÃ¼ncellemeler
e) Sohbet YÃ¶netimi

Aktif konuÅŸmalar 
Mesaj geÃ§miÅŸi
MÃ¼ÅŸteri bilgileri
CanlÄ± destek devralma
f) Analitik ve Raporlar

Sohbet istatistikleri
Randevu metrikleri
Gelir analizi
PopÃ¼ler hizmetler
âš™ï¸ BACKEND (API + AI Engine)
Teknoloji Stack
Runtime: Node.js 20 LTS
Framework: Express.js 5
Language: TypeScript
Database: Supabase (PostgreSQL)
Cache: Redis + IORedis
Queue: BullMQ
WebSocket: Socket.io
AI: Google Gemini 2.5 
Web Scraping: Puppeteer + Firecrawl
Validation: Zod
Logging: Winston
Servis Mimarisi
1. Core Services (Temel Servisler)
a) Authentication Service

JWT token yÃ¶netimi
Multi-tenant izolasyonu
Rol tabanlÄ± yetkilendirme
b) Bot Service

Gemini AI entegrasyonu
KonuÅŸma yÃ¶netimi
Function calling

c) Cache Service

Redis cache yÃ¶netimi
TTL stratejileri
Invalidation mekanizmasÄ±
2. AI Setup Services (Otomatik Kurulum)
a) Scraper Orchestrator

Puppeteer scraper
Firecrawl scraper
Multi-page scraping
Retry mekanizmasÄ±
b) Two-Phase Extractor

Faz 1: Ã–zet Ã§Ä±karma (homepage)
Åirket bilgileri
SektÃ¶r tespiti
Tespit edilen Ã¶ÄŸeler (hizmet/Ã¼rÃ¼n/personel)
Faz 2: Detay Ã§Ä±karma (item pages)
Link eÅŸleÅŸtirme
DetaylÄ± bilgi Ã§Ä±karma
GÃ¶rsel ve fiyat bilgileri
c) Link Matcher

Exact matching
Fuzzy matching
Content-based matching
d) Multi-Stage Extractor (Alternatif)

5 aÅŸamalÄ± extraction
Stage-by-stage kontrol
Session recovery
3. Business Services (Ä°ÅŸ MantÄ±ÄŸÄ±)
a) Service Management

CRUD operasyonlarÄ±
Kategori yÃ¶netimi
Availability kontrolÃ¼
b) Appointment Service

Randevu oluÅŸturma
Conflict detection (provider-based)
Availability checking
Cache invalidation
Google Takvim uyumlu
c) Resource Service

Kaynak yÃ¶netimi
Kapasite kontrolÃ¼
Ã‡akÄ±ÅŸma Ã¶nleme
d) Conversation Service

Sohbet yÃ¶netimi
Mesaj kaydetme
Real-time events
SektÃ¶r standartlarÄ±nda Sohbet sistemi
e) Knowledge Base Service

SSS yÃ¶netimi
Otomatik kategorileme
Arama ve filtreleme
4. AI Pipeline Services (Import Sistemi)
a) Pipeline Orchestrator

Servis/Ã¼rÃ¼n/personel import
Deep scraping
Queue yÃ¶netimi
b) Specialized Extractors

Service extractor
Product extractor
Personnel extractor
Feature generator
Sector detector
ğŸ—„ï¸ DATABASE (Supabase PostgreSQL)
Multi-Tenant YapÄ±
Her tablo tenant_id ile izole edilmiÅŸ, Row Level Security (RLS) aktif.

Ana Tablo Kategorileri
1. Core Tables (Temel)
tenants: Ä°ÅŸletme bilgileri
users: Sistem kullanÄ±cÄ±larÄ±
customers: MÃ¼ÅŸteri verileri
2. Bot Configuration (Bot YapÄ±landÄ±rmasÄ±)
bot_configs: Bot ayarlarÄ±, sistem talimatlarÄ±
bot_knowledge_base: Bilgi tabanÄ± girdileri
bot_functions: Aktif fonksiyonlar
3. AI & Data Collection (Veri Toplama)
ai_scraped_data: Scraping sonuÃ§larÄ±
company_information: Åirket detaylarÄ±
unified_auto_setup_sessions: Kurulum oturumlarÄ±
4. Business Entities (Ä°ÅŸ VarlÄ±klarÄ±)
services: Hizmet kataloÄŸu
provider_type, provider_name (conflict detection iÃ§in)
duration_minutes, price
is_available, category
products: ÃœrÃ¼n kataloÄŸu
resources: Kaynaklar (personel, oda, ekipman)
type, capacity, availability
appointments: Randevular
service_id (ZORUNLU)
resource_id (opsiyonel)
scheduled_date, scheduled_time
status, priority
5. Communication (Ä°letiÅŸim)
conversations: Sohbet oturumlarÄ±
messages: Mesajlar
notifications: Bildirimler
Database Ã–zellikleri
RLS (Row Level Security): Tenant izolasyonu
Indexes: Performans optimizasyonu
Triggers: Otomatik iÅŸlemler
Functions: Stored procedures
ğŸ’¾ CACHE STRATEJÄ°SÄ° (Redis)
Cache TÃ¼rleri
1. Short-Term Cache (KÄ±sa SÃ¼reli)
Hizmet listeleri: 5 dakika TTL
MÃ¼saitlik sorgularÄ±: Manuel invalidation
KullanÄ±cÄ± oturumlarÄ±: 30 dakika TTL
2. Long-Term Cache (Uzun SÃ¼reli)
Prompt ÅŸablonlarÄ±: Persistent
Bot yapÄ±landÄ±rmasÄ±: Persistent
Åirket bilgileri: 1 saat TTL
3. Invalidation Stratejisi
Randevu oluÅŸturulduÄŸunda â†’ Availability cache temizlenir
Hizmet gÃ¼ncellendiÄŸinde â†’ Service list cache temizlenir
Bot config deÄŸiÅŸtiÄŸinde â†’ Prompt cache temizlenir

AI ye gÃ¶nderilecek yani apiye gÃ¶nderilecek verilerin hÄ±zlÄ± olamasÄ± gerekiyor. Chache Sohbet session
ğŸ¤– YAPAY ZEKA SÄ°STEMÄ°
AI Provider
Google Gemini 2.5 Flash

HÄ±zlÄ± yanÄ±t sÃ¼resi
Function calling desteÄŸi
TÃ¼rkÃ§e dil desteÄŸi
Maliyet etkin
AI KullanÄ±m AlanlarÄ±
1. Otomatik Kurulum
Web sitesi iÃ§erik analizi
Åirket bilgisi Ã§Ä±karma
Hizmet/Ã¼rÃ¼n/Personel tespiti
Kategori belirleme
SSS oluÅŸturma
2. Chatbot
DoÄŸal dil anlama
BaÄŸlam yÃ¶netimi
Function calling (randevu, hizmet listeleme)
Ã‡ok dilli destek

3. Function Calling
Mevcut Fonksiyonlar:

list_services: Hizmet listeleme
get_service_details: Hizmet detayÄ±
check_appointment_availability: MÃ¼saitlik kontrolÃ¼
create_appointment: Randevu oluÅŸturma
list_appointments: Randevu listeleme
update_appointment: Randevu gÃ¼ncelleme
cancel_appointment: Randevu iptali
list_resources: Kaynak listeleme
search_knowledge_base: Bilgi tabanÄ± arama
handover_to_human: CanlÄ± desteÄŸe yÃ¶nlendirme
Prompt Sistemi (Modular)
YapÄ±:

System Instructions: Genel davranÄ±ÅŸ kurallarÄ±
Tenant Information: Ä°ÅŸletme bilgileri
Knowledge Base: SSS ve bilgi tabanÄ±
Function Data: Hizmet, personel, kaynak listeleri
Rules Modules: Randevu, sipariÅŸ, destek kurallarÄ±
Ã–zellikler:

Dinamik prompt oluÅŸturma
Cache mekanizmasÄ±
ModÃ¼ler yapÄ± (kolayca Ã¶zelleÅŸtirilebilir)
Token optimizasyonu
ğŸ”„ OTOMATIK KURULUM SÄ°STEMÄ°
Ä°ki FazlÄ± YaklaÅŸÄ±m
Faz 1: Ã–zet Ã‡Ä±karma (Summary Phase)
AmaÃ§: HÄ±zlÄ± genel bakÄ±ÅŸ

SÃ¼reÃ§:

Homepage scraping (Puppeteer/Firecrawl)
AI ile analiz
Ã‡Ä±karÄ±lan bilgiler:
Åirket adÄ±, sektÃ¶r, aÃ§Ä±klama
Ä°letiÅŸim bilgileri
Tespit edilen Ã¶ÄŸeler (isimler + linkler)
KullanÄ±cÄ±ya Ã¶zet gÃ¶sterilir
Onay beklenir


Faz 2: Detay Ã‡Ä±karma (Detail Phase)
AmaÃ§: DetaylÄ± bilgi toplama

SÃ¼reÃ§:

KullanÄ±cÄ± onayladÄ±ktan sonra baÅŸlar
Her Ã¶ÄŸe iÃ§in:
Link eÅŸleÅŸtirme (exact/fuzzy/content)
Sayfa scraping
AI ile detay Ã§Ä±karma
Ã‡Ä±karÄ±lan bilgiler:
Tam aÃ§Ä±klama
Fiyat, sÃ¼re
GÃ¶rseller
Ã–zellikler
Database'e kayÄ±t
Cache gÃ¼ncelleme
SÃ¼re: ~2-5 dakika (Ã¶ÄŸe sayÄ±sÄ±na gÃ¶re)

Scraping Providers
1. Puppeteer (VarsayÄ±lan)
Avantajlar: Ãœcretsiz, hÄ±zlÄ±, kontrol edilebilir
Dezavantajlar: JavaScript rendering sÄ±nÄ±rlÄ±
KullanÄ±m: Basit siteler
2. Firecrawl (Premium)
Avantajlar: GeliÅŸmiÅŸ scraping, markdown Ã§Ä±ktÄ±, Ã§oklu sayfa
Dezavantajlar: Ãœcretli, API limitleri
KullanÄ±m: KarmaÅŸÄ±k siteler, SPA'lar
ğŸ“± WIDGET (GÃ¶mÃ¼lebilir Chat)
Teknoloji Stack
Framework: React 18
Build Tool: Vite
Real-time: Socket.io Client
Styling: Inline CSS (izolasyon iÃ§in)
Ã–zellikler
GÃ¶mÃ¼lebilir: Tek script tag ile entegrasyon
Ã–zelleÅŸtirilebilir: Renk, logo, pozisyon
Responsive: Mobil ve desktop uyumlu
Multi-language: TR, EN, DE, FR
Session Persistence: LocalStorage ile oturum saklama
Unread Notifications: OkunmamÄ±ÅŸ mesaj bildirimi
Full-screen Mode: Mobilde tam ekran
Lightweight: < 100KB gzipped
Entegrasyon
<script src="https://cdn.example.com/widget.js"></script>
<script>
  ChatWidget.init({
    tenantId: 'your-tenant-id',
    apiUrl: 'https://api.example.com',
    primaryColor: '#007bff'
  });
</script>
Mesaj Tipleri
Text mesajlar
GÃ¶rsel mesajlar
Button'lu mesajlar
Card'lÄ± mesajlar
Quick replies
ğŸ” GÃœVENLÄ°K VE YETKÄ°LENDÄ°RME
Authentication
JWT Token: Access + Refresh token
Cookie-based: HttpOnly, Secure
Multi-tenant: Tenant ID ile izolasyon
Authorization
Role-based: Admin, User, Customer
Row Level Security: Database seviyesinde izolasyon
API Rate Limiting: DDoS korumasÄ±
Data Security
Encryption: Hassas veriler ÅŸifreli
HTTPS: TÃ¼m iletiÅŸim ÅŸifreli
Input Validation: Zod ile validasyon
SQL Injection: Parameterized queries
ğŸš€ PERFORMANS OPTÄ°MÄ°ZASYONU
Frontend
Code Splitting: Route-based lazy loading
Image Optimization: Next.js Image component
Caching: SWR ile client-side cache
Memoization: React.memo, useMemo
Backend
Redis Cache: SÄ±k kullanÄ±lan veriler
Database Indexes: HÄ±zlÄ± sorgular
Connection Pooling: Database baÄŸlantÄ± havuzu
Queue System: BullMQ ile async iÅŸlemler
Real-time
WebSocket: Socket.io ile dÃ¼ÅŸÃ¼k latency
Room-based: Tenant bazlÄ± izolasyon
Event Throttling: Gereksiz event'leri engelleme
ğŸ“Š RANDEVU SÄ°STEMÄ° (DetaylÄ±)
Service-Based Architecture
Her randevu bir hizmet Ã¼zerinden oluÅŸturulur (service_id zorunlu).

Conflict Detection (Ã‡akÄ±ÅŸma Ã–nleme)
Provider-Based MantÄ±k:

Service'in provider bilgilerini kontrol et
AynÄ± provider'a sahip tÃ¼m servisleri bul
Bu servislerin randevularÄ±nÄ± kontrol et
Zaman Ã§akÄ±ÅŸmasÄ± hesapla
Ã‡akÄ±ÅŸma varsa hata dÃ¶ndÃ¼r
FormÃ¼l:

Ã‡akÄ±ÅŸma = (requestStart < aptEnd) && (requestEnd > aptStart)
Resource Management
Opsiyonel: BazÄ± hizmetler kaynak gerektirir
Capacity: Kaynak kapasitesi kontrolÃ¼
Availability: MÃ¼saitlik kontrolÃ¼
Real-time Updates
Randevu oluÅŸturulduÄŸunda â†’ WebSocket event
Frontend otomatik gÃ¼ncellenir
Cache invalidation
ğŸ”§ DEPLOYMENT VE ALTYAPI
Hosting (Ã–nerilen)
Frontend: Vercel / Netlify
Backend: Railway / Render / DigitalOcean
Database: Supabase (managed PostgreSQL)
Cache: Redis Cloud / Upstash
Widget: CDN (Cloudflare)
Environment Variables
Frontend: 10+ deÄŸiÅŸken (API URL, public keys)
Backend: 20+ deÄŸiÅŸken (DB, Redis, AI keys)
Widget: 3 deÄŸiÅŸken (API URL, tenant ID)
Monitoring
Logging: Winston (file + console)
Error Tracking: Sentry (opsiyonel)
Performance: New Relic (opsiyonel)
